// append the new comment to the existing ones
<% if params[:action] == 'update' %>
	$('#<%= @comment.id %>').replaceWith('<%= j render("comments/comment", comment: @comment, subcomment: true ) %>');
<% elsif @comment.comment_id.nil? %>
	$('.comments .show_comments').append('<%= j render("comments/comment", comment: @comment, subcomment: false ) %>') ;
	$('.comments .show_comments #<%= @comment.id %>').hide().fadeIn('slow');
	$('.new_comments textarea').val('');
<% else %>
	$('#<%= @comment.comment_id %> .subcomments .show_subcomments').append('<%= j render("comments/comment", comment: @comment, subcomment: true ) %>') ;
	$('.subcomments .show_subcomments #<%= @comment.id %>').hide().fadeIn('slow');
	$('.new_subcomments textarea').val('');
<% end %>
$('.new_subcomments').slideUp() ;
// scroll effect to set the right place
$("html, body").animate({scrollTop: $('#<%= @comment.id %>').offset().top - 50 }, 1000);